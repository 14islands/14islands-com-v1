$width: 600px;
$height: 347px;

$aspect-ratio: $width / $height;

$transition-duration: .9s;
$transition-easing: $easeOutQuart;


.threats-malware-animation {
	display: inline-block;
	position: relative;
	max-width: $width;
	width: 100%;
	overflow: hidden;
}

// prevent reflows when image loads
.threats-malware-animation__ratio {
	@include responsive-ratio($width, $height);

	&:before,
	&:after {
		position: absolute;
		content: "";
		top: 0;
		left: 0;
		bottom: 0;
		width: 10%;
		background: linear-gradient(to right, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%);
		z-index: 100;
	}
	&:after {
		left: auto;
		right: 0;
		background: linear-gradient(to left, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%);
	}
}

.threats-malware-animation__ratio__fg {
	position: relative;
}

.threats-malware-animation__ratio__circle {
	$size: 32%;
	$border-size: 9.5%;
	width: $size;
	height: $size * $aspect-ratio;
	position: absolute;
	top: 56% - ($size * $aspect-ratio/2);;
	left: 50% - ($size/2);
	border-radius: 100%;
	background: #e5e9ea;

	&:after {
		position: absolute;
		content: "";
		top: $border-size;
		left: $border-size;
		right: $border-size;
		bottom: $border-size;
		background: #ffffff;
		border-radius: 100%;
	}

	transform: scale(0);
	.run & {
		transform: scale(1);
		.csstransforms3d {
			transform: scale(1) translateZ(0);
		}
		transition: transform $transition-duration $transition-easing;
	}
}

.threats-malware-animation__ratio__cloud {
	width: 100%;
	position: absolute;

	background: url(/images/threats/threats-malware-animation-cloud.png) left center no-repeat;
	background-size: contain;
	opacity: 0.5;

	.run & {
		transition: transform 30s linear;
	}

	&:nth-child(1) {
		top: 20%;
		left: 0;
		height: 13%;
		transform: translateX(-10%);
		.run & {
			transform: translateX(100%);
		}
	}
	&:nth-child(2) {
		top: 10%;
		right: 0;
		height: 10%;
		transform: translateX(100%);
		.run & {
			transform: translateX(-10%);
			transition-duration: 34s;
		}
	}
	&:nth-child(3) {
		top: 40%;
		right: 0;
		height: 7%;
		transform: translateX(100%);
		.run & {
			transform: translateX(-10%);
			transition-duration: 32s;
		}
	}
}
